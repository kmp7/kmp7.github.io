<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
	<script src="d3.v7.min.js"></script>
    <style>
        :root {
            --bg-color: #f5f5f5;
			--text-color: #333;
            --primary-color: #4a6fa5;
            --secondary-color: #e9ecef;
            --accent-color: #6c5ce7;
            --card-bg: #ffffff;
            --shadow-color: rgba(0, 0, 0, 0.1);
			--primary-color: #3e76ad;
		--header-text-color: #ffffff;
		--border-radius: 8px;
        }

        .dark-theme {
            --bg-color: #1a1a2e;
			--text-color: #e6e6e6;
            --primary-color: #5a7bb5;
            --secondary-color: #2d3748;
            --accent-color: #8c7ae6;
            --card-bg: #2a2a40;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            transition: background-color 0.3s, color 0.3s;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
        }

        header {
            background-color: var(--primary-color);
			color: var(--header-text-color);
			display: flex;
            justify-content: space-between;
            align-items: center;
			padding: 30px 20px;
            border-radius: var(--border-radius);
            margin-bottom: 20px;
            margin-bottom: 30px;
            padding-bottom: 30px;
            border-bottom: 1px solid var(--border);
			background-image: linear-gradient(135deg, var(--primary-color) 0%, #2c3e50 100%);
        }

        h1 {
            color: #ffffff;
            font-size: 1.8rem;
        }

        .theme-toggle {
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            padding: 5px;
            border-radius: 50%;
            background-color: var(--secondary-color);
            width: 40px;
            height: 40px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .card {
            background-color: var(--card-bg);
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px var(--shadow-color);
        }

        h2 {
            color: var(--primary-color);
            margin-bottom: 15px;
            font-size: 1.5rem;
        }

        p {
            margin-bottom: 15px;
        }

        .visualization-container {
            width: 100%;
            height: 500px;
            margin: 20px 0;
            position: relative;
            overflow: hidden;
            border-radius: 8px;
            background-color: var(--secondary-color);
        }

        svg {
            width: 100%;
            height: 100%;
        }

        .tooltip {
            position: absolute;
            padding: 12px;
            background-color: var(--card-bg);
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
            pointer-events: none;
            opacity: 0;
            transition: opacity 0.2s, transform 0.2s;
            max-width: 240px;
            z-index: 100;
            backdrop-filter: blur(4px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            transform: translate(-50%, -100%) translateY(-10px);
        }

        .tooltip:after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 0;
            border-left: 8px solid transparent;
            border-right: 8px solid transparent;
            border-top: 8px solid var(--card-bg);
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }

        input[type="text"] {
            width: 100%;
            padding: 10px;
            border: 1px solid var(--secondary-color);
            border-radius: 5px;
            background-color: var(--card-bg);
            color: var(--text-color);
        }

        button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: background-color 0.3s;
        }

        button:hover {
            background-color: var(--accent-color);
        }

        .legend {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-right: 15px;
        }

        .legend-color {
            width: 18px;
            height: 18px;
            border-radius: 4px;
            margin-right: 8px;
        }

        .tabs {
            display: flex;
            margin-bottom: 15px;
            border-bottom: 1px solid var(--secondary-color);
        }

        .tab {
            padding: 10px 20px;
            cursor: pointer;
            border-bottom: 2px solid transparent;
            transition: all 0.2s;
        }

        .tab:hover {
            color: var(--accent-color);
        }

        .tab.active {
            border-bottom: 2px solid var(--accent-color);
            color: var(--accent-color);
            font-weight: 600;
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        footer {
            text-align: center;
            margin-top: 30px;
            padding-top: 15px;
            border-top: 1px solid var(--secondary-color);
            font-size: 0.9rem;
            color: var(--text-color);
        }

        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            h1 {
                font-size: 1.5rem;
            }

            .visualization-container {
                height: 350px;
            }

            .tabs {
                flex-direction: column;
            }

            .tab {
                padding: 8px 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π</h1>
            <button class="theme-toggle" id="themeToggle">‚òÄÔ∏è</button>
        </header>

        <div class="card">
            <div class="tabs">
                <div class="tab active" data-tab="vector-viz">–í–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è</div>
                <div class="tab" data-tab="semantic-space">–°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</div>
                <div class="tab" data-tab="about">–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</div>
            </div>

            <div class="tab-content active" id="vector-viz">
                <h2>–í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π</h2>
                <p>–ù–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ —ç–ª–µ–º–µ–Ω—Ç—ã –¥–ª—è –¥–µ—Ç–∞–ª—å–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—Ä—É–∫—Ç—É—Ä–µ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π.</p>
                
                <div class="visualization-container">
                    <svg id="vectorViz"></svg>
                    <div class="tooltip" id="tooltip"></div>
                </div>

                <div class="legend">
                    <div class="legend-item">
                        <span>–í–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤:</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #6c5ce7;"></div>
                        <span>Word Embeddings</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #e84393;"></div>
                        <span>Contextual Embeddings</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background-color: #00b894;"></div>
                        <span>Sentence Embeddings</span>
                    </div>
                </div>
            </div>

            <div class="tab-content" id="semantic-space">
                <h2>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</h2>
                <p>–í–≤–µ–¥–∏—Ç–µ —Å–≤–æ—é –§–∞–º–∏–ª–∏—é, –∏ —Å–∏—Å—Ç–µ–º–∞ —Å–æ–∑–¥–∞—Å—Ç —É–Ω–∏–∫–∞–ª—å–Ω–æ–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ –≤–∞—à–µ–π –∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ (–≤ –∫–∞—á–µ—Å—Ç–≤–µ –∏–∑—É—á–∞—é—â–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–Ω—É—é –ª–∏–Ω–≥–≤–∏—Å—Ç–∫—É —Å—Ç—É–¥–µ–Ω—Ç–∞, –∫–æ–Ω–µ—á–Ω–æ) –Ω–∞ –æ—Å–Ω–æ–≤–µ —Å–≤—è–∑–µ–π –º–µ–∂–¥—É –∫–ª—é—á–µ–≤—ã–º–∏ –∫–æ–Ω—Ü–µ–ø—Ç–∞–º–∏ –ø—Ä–µ–¥–º–µ—Ç–Ω–æ–≥–æ –ø–æ–ª—è —É—á–µ–±–Ω–æ–≥–æ –∫—É—Ä—Å–∞.</p>
                
                <div class="form-group">
                    <label for="lastName">–í–∞—à–∞ —Ñ–∞–º–∏–ª–∏—è:</label>
                    <input type="text" id="lastName" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –ò–≤–∞–Ω–æ–≤–∞">
                </div>
                <button id="generateBtn">–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</button>
                
                <div class="visualization-container">
                    <svg id="semanticViz"></svg>
                    <div class="tooltip" id="semanticTooltip"></div>
                </div>
            </div>

            <div class="tab-content" id="about">
                <h2>–û –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏</h2>
                <p>–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –≤–µ–∫—Ç–æ—Ä–Ω—ã—Ö –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–π –≤ NLP, CL, AI</p>
                <h3>–û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</h3>
                <ul style="padding-left: 20px;">
                    <li>–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–¥–∏–∞–ª—å–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ –∏–µ—Ä–∞—Ä—Ö–∏–∏ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤</li>
                    <li>–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–æ</li>
                    <li>–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –¥–ª—è –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤</li>
                    <li>–ü–ª–∞–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã –∏ –∞–Ω–∏–º–∞—Ü–∏–∏</li>
                </ul><br>
                <h3>–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:</h3>
                <ul style="padding-left: 20px;">
                    <li>HTML</li>
                    <li>CSS</li>
                    <li>JavaScript</li>
                    <li>D3.v7.mini.js</li>
                </ul>
                
              </div>
        </div>

        <footer class="footer">
<div class="container">
<p>¬© 2025 | kmp | CC BY-NC-SA 4.0<br>
–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ë—Ä–ì–£ –∏–º–µ–Ω–∏ –ê.–°. –ü—É—à–∫–∏–Ω–∞</p>
</div>
</footer>
<div style="position: fixed; bottom: 10px; right: 33px; opacity: 0.3; font-size: 14px;">kmp+</div>
    
    </div>

    <script>
        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ–º—ã
        const themeToggle = document.getElementById('themeToggle');
        themeToggle.addEventListener('click', () => {
            document.body.classList.toggle('dark-theme');
            themeToggle.textContent = document.body.classList.contains('dark-theme') ? 'üåô' : '‚òÄÔ∏è';
            // –ü–µ—Ä–µ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–µ–º—ã
            if (document.getElementById('vector-viz').classList.contains('active')) {
                createSunburstVisualization();
            } else if (document.getElementById('semantic-space').classList.contains('active')) {
                const lastName = document.getElementById('lastName').value.trim();
                if (lastName) createNetworkVisualization(lastName);
            }
        });

        // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤–∫–ª–∞–¥–æ–∫
        const tabs = document.querySelectorAll('.tab');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                document.querySelectorAll('.tab-content').forEach(content => {
                    content.classList.remove('active');
                });
                
                const tabId = tab.getAttribute('data-tab');
                document.getElementById(tabId).classList.add('active');
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–µ–π –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏
                if (tabId === 'vector-viz') {
                    createSunburstVisualization();
                } else if (tabId === 'semantic-space') {
                    const lastName = document.getElementById('lastName').value.trim();
                    if (lastName) createNetworkVisualization(lastName);
                }
            });
        });

        // –°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Ä–∞–¥–∏–∞–ª—å–Ω–∞—è –¥–∏–∞–≥—Ä–∞–º–º–∞ (Sunburst)
        function createSunburstVisualization() {
            const svg = d3.select('#vectorViz');
            const width = svg.node().getBoundingClientRect().width;
            const height = svg.node().getBoundingClientRect().height;
            const radius = Math.min(width, height) / 2 - 20;
            const tooltip = d3.select('#tooltip');
            
            svg.selectAll('*').remove();
            
            // –°–æ–∑–¥–∞–µ–º –≥—Ä—É–ø–ø—É –¥–ª—è –¥–∏–∞–≥—Ä–∞–º–º—ã
            const g = svg.append('g')
                .attr('transform', `translate(${width/2},${height/2})`);
            
            // –î–∞–Ω–Ω—ã–µ
            const data = {
                name: "–í–µ–∫—Ç–æ—Ä–Ω—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è",
                description: "–ß–∏—Å–ª–æ–≤—ã–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ –≤ –º–Ω–æ–≥–æ–º–µ—Ä–Ω–æ–º –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–µ",
                color: "#4a6fa5",
                children: [
                    {
                        name: "Word Embeddings",
                        description: "–°—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å–ª–æ–≤",
                        color: "#6c5ce7",
                        children: [
                            { name: "Word2Vec", description: "CBOW –∏ Skip-gram –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã", value: 10, color: "#a55eea" },
                            { name: "GloVe", description: "–ù–∞ –æ—Å–Ω–æ–≤–µ –º–∞—Ç—Ä–∏—Ü—ã —Å–æ–≤–º–µ—Å—Ç–Ω–æ–π –≤—Å—Ç—Ä–µ—á–∞–µ–º–æ—Å—Ç–∏", value: 8, color: "#8854d0" },
                            { name: "FastText", description: "–° —É—á–µ—Ç–æ–º —Å—É–±—Å–ª–æ–≤–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏", value: 7, color: "#786fa6" }
                        ]
                    },
                    {
                        name: "Contextual Embeddings",
                        description: "–î–∏–Ω–∞–º–∏—á–µ—Å–∫–∏–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Å —É—á–µ—Ç–æ–º –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞",
                        color: "#e84393",
                        children: [
                            { name: "BERT", description: "–î–≤—É–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–π —Ç—Ä–∞–Ω—Å—Ñ–æ—Ä–º–µ—Ä", value: 12, color: "#fd79a8" },
                            { name: "ELMo", description: "–ù–∞ –æ—Å–Ω–æ–≤–µ LSTM", value: 6, color: "#e66767" },
                            { name: "GPT", description: "–ê–≤—Ç–æ—Ä–µ–≥—Ä–µ—Å—Å–∏–æ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å", value: 9, color: "#cf6a87" }
                        ]
                    },
                    {
                        name: "Sentence Embeddings",
                        description: "–ü—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è —Ü–µ–ª—ã—Ö –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–π",
                        color: "#00b894",
                        children: [
                            { name: "USE", description: "Universal Sentence Encoder", value: 7, color: "#55efc4" },
                            { name: "InferSent", description: "–û–±—É—á–µ–Ω –Ω–∞ –∑–∞–¥–∞—á–µ –≤—ã–≤–æ–¥–∞", value: 5, color: "#00cec9" }
                        ]
                    }
                ]
            };

            // –°–æ–∑–¥–∞–µ–º –∏–µ—Ä–∞—Ä—Ö–∏—é
            const root = d3.hierarchy(data)
                .sum(d => d.value || 10)
                .sort((a, b) => b.value - a.value);

            // –°–æ–∑–¥–∞–µ–º –º–∞–∫–µ—Ç sunburst
            const partition = d3.partition()
                .size([2 * Math.PI, radius]);
            
            const arc = d3.arc()
                .startAngle(d => d.x0)
                .endAngle(d => d.x1)
                .innerRadius(d => d.y0)
                .outerRadius(d => d.y1 - (d.depth === 0 ? 0 : 1));
            
            // –ü—Ä–∏–º–µ–Ω—è–µ–º –º–∞–∫–µ—Ç
            partition(root);
            
            // –†–∏—Å—É–µ–º —Å–µ–≥–º–µ–Ω—Ç—ã
            g.selectAll('path')
                .data(root.descendants().filter(d => d.depth))
                .enter()
                .append('path')
                .attr('d', arc)
                .style('fill', d => d.data.color)
                .style('fill-opacity', d => 1 - d.depth * 0.15)
                .style('stroke', 'var(--card-bg)')
                .style('stroke-width', 1)
                .style('cursor', 'pointer')
                .on('mouseover', function(event, d) {
                    d3.select(this)
                        .style('stroke-width', 2)
                        .style('filter', 'url(#glow)');
                    
                    // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
                    const [x, y] = d3.pointer(event, svg.node());
                    const tooltipWidth = 240;
                    const tooltipHeight = 100;
                    
                    let left = x;
                    let top = y - tooltipHeight - 20;
                    
                    // –ö–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞ –ø–æ–ª–æ–∂–µ–Ω–∏—è —É –≥—Ä–∞–Ω–∏—Ü
                    if (left < tooltipWidth / 2) left = tooltipWidth / 2;
                    if (left > width - tooltipWidth / 2) left = width - tooltipWidth / 2;
                    if (top < 20) top = y + 20;
                    
                    tooltip
                        .style('opacity', 1)
                        .style('left', `${left}px`)
                        .style('top', `${top}px`)
                        .style('transform', `translateX(-50%)`)
                        .html(`<strong>${d.data.name}</strong><br>${d.data.description}`);
                })
                .on('mouseout', function() {
                    d3.select(this)
                        .style('stroke-width', 1)
                        .style('filter', 'none');
                    tooltip.style('opacity', 0);
                });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Å–≤–µ—á–µ–Ω–∏—è
            const defs = svg.append('defs');
            defs.append('filter')
                .attr('id', 'glow')
                .append('feGaussianBlur')
                .attr('stdDeviation', '3')
                .attr('result', 'coloredBlur');
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
            g.selectAll('text')
                .data(root.descendants().filter(d => d.depth && (d.y0 + d.y1) / 2 * (d.x1 - d.x0) > 10))
                .enter()
                .append('text')
                .attr('transform', d => {
                    const x = (d.x0 + d.x1) / 2 * 180 / Math.PI;
                    const y = (d.y0 + d.y1) / 2;
                    return `rotate(${x - 90}) translate(${y},0) rotate(${x < 180 ? 0 : 180})`;
                })
                .attr('dy', '0.35em')
                .attr('text-anchor', d => (d.x0 + d.x1) / 2 * 180 / Math.PI < 180 ? 'start' : 'end')
                .text(d => d.data.name)
                .style('font-size', '11px')
                .style('fill', 'var(--text-color)')
                .style('pointer-events', 'none');
        }

        // –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø—Ä–æ—Å—Ç—Ä–∞–Ω—Å—Ç–≤–∞ (–≥—Ä–∞—Ñ)
        function createNetworkVisualization(lastName) {
            const svg = d3.select('#semanticViz');
            const width = svg.node().getBoundingClientRect().width;
            const height = svg.node().getBoundingClientRect().height;
            const tooltip = d3.select('#semanticTooltip');
            
            svg.selectAll('*').remove();
            
            // –ü—Ä–µ–¥–∑–∞–¥–∞–Ω–Ω—ã–π –Ω–∞–±–æ—Ä —Å–ª–æ–≤
            const baseWords = [
                "—Å—Ç—É–¥–µ–Ω—Ç", "—É—á–µ–±–∞", "–∑–Ω–∞–Ω–∏—è", "–ª–∏–Ω–≥–≤–∏—Å—Ç–∏–∫–∞", "—è–∑—ã–∫–∏", 
                "—ç–º–±–µ–¥–¥–∏–Ω–≥", "–≤–µ–∫—Ç–æ—Ä—ã", "—Å–µ–º–∞–Ω—Ç–∏–∫–∞", "–∞–Ω–∞–ª–∏–∑", "–∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ",
                "–ø–µ—Ä–µ–≤–æ–¥", "–∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è", "–≥—Ä–∞–º–º–∞—Ç–∏–∫–∞", "–ª–µ–∫—Å–∏–∫–∞", "–ø–æ–Ω–∏–º–∞–Ω–∏–µ",
                "–º–æ–¥–µ–ª—å", "–∞–ª–≥–æ—Ä–∏—Ç–º", "–∫–æ–Ω—Ç–µ–∫—Å—Ç", "–ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏–µ", "–æ–±—É—á–µ–Ω–∏–µ"
            ];
            
            // –ì–µ–Ω–µ—Ä–∏—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ
            const nodes = baseWords.map(word => {
                const hash = Array.from(word + lastName).reduce((acc, char) => acc + char.charCodeAt(0), 0);
                const x = (hash % 100) / 100;
                const y = ((hash * 13) % 100) / 100;
                const similarity = calculateSimilarity(word, lastName);
                
                return {
                    id: word,
                    word: word,
                    x: x * (width - 120) + 60,
                    y: y * (height - 120) + 60,
                    value: 18 + similarity * 12,
                    similarity: similarity,
                    color: d3.interpolateCool(similarity * 3.8)
                };
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∞–º–∏–ª–∏—é –≤ —Ü–µ–Ω—Ç—Ä
            nodes.push({
                id: lastName,
                word: lastName,
                x: width / 2,
                y: height / 2,
                value: 45,
                similarity: 1,
                color: '#f7e139',
                fixed: true
            });
            
            // –°–æ–∑–¥–∞–µ–º —Å–≤—è–∑–∏
            const links = nodes
                .filter(d => !d.fixed)
                .map(d => ({
                    source: d.id,
                    target: lastName,
                    value: d.similarity
                }));
            
            // –°–∏–º—É–ª—è—Ü–∏—è –≥—Ä–∞—Ñ–∞
            const simulation = d3.forceSimulation(nodes)
                .force('charge', d3.forceManyBody().strength(-500))
                .force('center', d3.forceCenter(width / 2, height / 2))
                .force('link', d3.forceLink(links)
                    .id(d => d.id)
                    .distance(d => 100 + (1 - d.value) * 150))
                .force('collision', d3.forceCollide().radius(d => d.value * 1.2));
            
            // –†–∏—Å—É–µ–º —Å–≤—è–∑–∏
            const link = svg.append('g')
                .selectAll('line')
                .data(links)
                .enter()
                .append('line')
                .attr('stroke', d => d3.interpolateCool(d.value * 0.8))
                .attr('stroke-width', d => d.value * 2)
                .attr('stroke-opacity', 0.6);
            
            // –†–∏—Å—É–µ–º —É–∑–ª—ã
            const node = svg.append('g')
                .selectAll('circle')
                .data(nodes)
                .enter()
                .append('circle')
                .attr('r', d => d.value)
                .attr('fill', d => d.color)
                .attr('stroke', 'var(--card-bg)')
                .attr('stroke-width', 2)
                .style('cursor', 'pointer')
                .call(drag(simulation))
                .on('mouseover', function(event, d) {
                    d3.select(this)
                        .attr('stroke-width', 3)
                        .style('filter', 'url(#glow)');
                    
                    // –ü–æ–∑–∏—Ü–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏
                    const [x, y] = d3.pointer(event, svg.node());
                    const tooltipWidth = 180;
                    const tooltipHeight = 70;
                    
                    let left = x;
                    let top = y - tooltipHeight - 15;
                    
                    if (top < 20) top = y + 15;
                    
                    tooltip
                        .style('opacity', 1)
                        .style('left', `${left}px`)
                        .style('top', `${top}px`)
                        .style('transform', `translateX(-50%)`)
                        .html(`<strong>${d.word}</strong><br>–°—Ö–æ–¥—Å—Ç–≤–æ: ${(d.similarity * 100).toFixed(1)}%`);
                })
                .on('mouseout', function() {
                    d3.select(this)
                        .attr('stroke-width', 2)
                        .style('filter', 'none');
                    tooltip.style('opacity', 0);
                });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ç–µ–∫—Å—Ç
            const text = svg.append('g')
                .selectAll('text')
                .data(nodes)
                .enter()
                .append('text')
                .attr('dy', 4)
                .style('font-size', d => Math.min(d.value / 2, 12))
                .style('font-weight', d => d.fixed ? 'bold' : 'normal')
                .text(d => d.word.length > 12 ? d.word.substring(0, 10) + '...' : d.word)
                .style('pointer-events', 'none');
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ —Å–∏–º—É–ª—è—Ü–∏–∏
            simulation.on('tick', () => {
                link
                    .attr('x1', d => d.source.x)
                    .attr('y1', d => d.source.y)
                    .attr('x2', d => d.target.x)
                    .attr('y2', d => d.target.y);
                
                node
                    .attr('cx', d => d.x)
                    .attr('cy', d => d.y);
                
                text
                    .attr('x', d => d.x)
                    .attr('y', d => d.y);
            });
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Ñ–∏–ª—å—Ç—Ä –¥–ª—è —Å–≤–µ—á–µ–Ω–∏—è
            const defs = svg.append('defs');
            defs.append('filter')
                .attr('id', 'glow')
                .append('feGaussianBlur')
                .attr('stdDeviation', '3')
                .attr('result', 'coloredBlur');
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ —Å—Ö–æ–¥—Å—Ç–≤–∞
            function calculateSimilarity(word, lastName) {
                const commonLetters = new Set([...word].filter(char => lastName.includes(char))).size;
                const lengthFactor = 1 - Math.abs(word.length - lastName.length) / 20;
                const randomFactor = (word.length * lastName.length) % 10 / 15;
                
                return Math.min((commonLetters / word.length * 0.6 + randomFactor * 0.2 + lengthFactor * 0.2) * 0.9 + 0.1, 1);
            }
            
            // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏—è —É–∑–ª–æ–≤
            function drag(simulation) {
                function dragstarted(event, d) {
                    if (!event.active) simulation.alphaTarget(0.3).restart();
                    d.fx = d.x;
                    d.fy = d.y;
                }
                
                function dragged(event, d) {
                    d.fx = event.x;
                    d.fy = event.y;
                }
                
                function dragended(event, d) {
                    if (!event.active) simulation.alphaTarget(0);
                    if (!d.fixed) {
                        d.fx = null;
                        d.fy = null;
                    }
                }
                
                return d3.drag()
                    .on('start', dragstarted)
                    .on('drag', dragged)
                    .on('end', dragended);
            }
        }

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        document.addEventListener('DOMContentLoaded', () => {
            createSunburstVisualization();
            
            document.getElementById('generateBtn').addEventListener('click', () => {
                const lastName = document.getElementById('lastName').value.trim();
                if (lastName) {
                    createNetworkVisualization(lastName);
                } else {
                    alert('–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ —Ñ–∞–º–∏–ª–∏—é');
                }
            });
            
            window.addEventListener('resize', () => {
                if (document.getElementById('vector-viz').classList.contains('active')) {
                    createSunburstVisualization();
                }
                
                const lastName = document.getElementById('lastName').value.trim();
                if (lastName && document.getElementById('semantic-space').classList.contains('active')) {
                    createNetworkVisualization(lastName);
                }
            });
        });
    </script>
</body>
</html>