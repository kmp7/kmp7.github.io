<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Успеваемость — Таблица студентов</title>
  <style>
    :root{
      --bg:#ffffff;
      --muted:#f8fafc;
      --accent:#4361ee;
      --brand:#3a56e4;
      --text:#1e293b;
      --success:#10b981;
      --warning:#f59e0b;
      --danger:#ef4444;
      --card-shadow:0 8px 25px rgba(18,38,63,0.08);
      --radius:12px;
      --gap:16px;
      font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
    }
    *{box-sizing:border-box; margin:0; padding:0;}
    body{
      margin:0;
      padding:20px;
      display:flex;
      flex-direction:column;
      gap:var(--gap);
      background:linear-gradient(135deg, var(--bg) 0%, var(--muted) 100%);
      color:var(--text);
      min-height:100vh;
      line-height:1.5;
    }
    header,footer,main{
      max-width:1200px;
      margin:0 auto;
      width:100%;
    }
    .announcement-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      padding: 16px 20px;
      border-radius: var(--radius);
      box-shadow: var(--card-shadow);
      margin-bottom: 8px;
      display: flex;
      align-items: center;
      gap: 12px;
    }
    .announcement-card svg {
      flex-shrink: 0;
    }
    .announcement-text {
      flex: 1;
    }
    .announcement-card h3 {
      margin: 0 0 4px 0;
      font-size: 16px;
    }
    .announcement-card p {
      margin: 0;
      font-size: 14px;
      opacity: 0.9;
    }
    .top-card{
      background: linear-gradient(135deg, rgba(255,255,255,0.7), rgba(255,255,255,0.3));
      padding: 20px;
      border-radius: var(--radius);
      box-shadow: var(--card-shadow);
      display:flex;
      flex-direction:column;
      gap:16px;
      backdrop-filter: blur(10px);
    }
    .title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      flex-wrap: wrap;
    }
    .title h1{
      margin:0;
      font-size:22px;
      color:var(--brand);
      font-weight:600;
    }
    .controls{
      display:flex;
      gap:12px;
      flex-wrap:wrap;
      align-items:center;
    }
    .control{
      display:flex;
      flex-direction:column;
      gap:4px;
    }
    .control label{
      font-size:13px;
      font-weight:500;
      color:var(--text);
      opacity:0.8;
    }
    select, .btn{
      padding:10px 14px;
      border-radius:8px;
      border:1px solid rgba(0,0,0,0.1);
      min-width:160px;
      font-size:14px;
      transition: all 0.2s ease;
    }
    select:focus{
      outline:none;
      border-color:var(--accent);
      box-shadow:0 0 0 3px rgba(67, 97, 238, 0.2);
    }
    .table-wrap{
  overflow:auto;
  border-radius:var(--radius);
  box-shadow:var(--card-shadow);
  background:linear-gradient(135deg, rgba(255,255,255,0.7), rgba(255,255,255,0.3));
  backdrop-filter: blur(10px);
}
table{
  border-collapse:collapse;
  width:100%;
  min-width:700px;
}
th,td{
  padding:12px 14px;
  text-align:left;
  border-bottom:1px solid rgba(0,0,0,0.05);
}
thead th{
  position:sticky;
  top:0;
  background:linear-gradient(135deg, rgba(255,255,255,0.9), rgba(255,255,255,0.8));
  backdrop-filter:blur(5px);
  font-weight:600;
  color:var(--brand);
}

/* Выделение заголовков работ и фамилий */
thead th:not(:first-child):not(:nth-child(2)) {
  background: #e8f4fd;
}

td:nth-child(2) {
  background: #f8f9fa;
  font-weight: 500;
}

/* Черезстрочное выделение для таблицы */
.table-wrap tbody tr:nth-child(even) {
  background-color: rgba(0, 0, 0, 0.02);
}

/* Эффект при наведении */
.table-wrap tbody tr:hover {
  background-color: rgba(67, 97, 238, 0.08);
  transition: background-color 0.2s ease;
}

/* Обновите существующие стили для ячеек */
.table-wrap tbody tr:nth-child(even) td {
  border-bottom-color: rgba(0, 0, 0, 0.03);
}

th:first-child,td:first-child{
  width:80px;
  font-weight:500;
}
th:nth-child(2),td:nth-child(2){
  width:180px;
  font-weight:500;
}
.score{
  text-align:center;
  font-weight:500;
  position: relative;
}
.percent{
  font-weight:600;
  text-align:center;
}

/* Стили для цветовых отметок */
.score.green {
  background-color: #d1fae5;
  color: #065f46;
  border-radius: 4px;
}

.score.yellow {
  background-color: #fef3c7;
  color: #92400e;
  border-radius: 4px;
}

.score.black {
  background-color: #374151;
  color: #f9fafb;
  border-radius: 4px;
}

.score.empty-cell {
  color: rgba(0,0,0,0.3);
}
	
    .score{
      text-align:center;
      font-weight:500;
    }
    .percent{
      font-weight:600;
      text-align:center;
    }
    @media(max-width:768px){
      body{padding:12px; gap:12px;}
      .title{flex-direction:column; align-items:flex-start;}
      .controls{width:100%;}
      .control{flex:1; min-width:140px;}
      select, .btn{min-width:auto; width:100%;}
      .btn-group{display:flex; gap:8px; width:100%;}
      .btn-group .btn{flex:1;}
      th,td{padding:10px 8px; font-size:14px;}
      th:first-child,td:first-child{width:70px;}
      th:nth-child(2),td:nth-child(2){width:120px;}
      .announcement-card{flex-direction:column; align-items:flex-start; gap:8px;}
      table {
        min-width: 600px;
      }
    }
    @media(max-width:480px){
      .controls{flex-direction:column;}
      .control{width:100%;}
      th,td{padding:8px 6px; font-size:13px;}
      th:first-child,td:first-child{width:60px;}
      th:nth-child(2),td:nth-child(2){width:100px;}
      table {
        min-width: 500px;
      }
    }
    footer .foot-card{
      background:linear-gradient(90deg, rgba(0,0,0,0.02), rgba(0,0,0,0.01));
      padding:14px;
      border-radius:var(--radius);
      font-size:13px;
      color:rgba(0,0,0,0.7);
      text-align:center;
    }
    .comment-box{
      background:var(--muted);
      padding:14px 18px;
      border-radius:var(--radius);
      margin-top:12px;
      font-size:14px;
      color:var(--text);
      border-left:4px solid var(--accent);
    }
    .empty-cell{
      color:rgba(0,0,0,0.3);
    }
	
	.link-kmp1 {
            color: #ffffff; 
            background-color: #bb0000;  /
            padding: 0.2em 0.3em; 
            margin: 0 8px;
            text-decoration: none; 
            border-radius: 3px; 
			padding: 0.1em 0.5em; 
            transition: background-color 0.2s ease-in-out, color 0.2s ease-in-out;
        }

  </style>
</head>
<body>
  <header>
    <div class="announcement-card">
      <div class="announcement-text">
        <h2>КОМПЬЮТЕРНОЕ МОДЕЛИРОВАНИЕ</h2>
        <p>Консультация по подготовке к экзамену состоится 15 декабря в 16:00 в аудитории 310.</p>
		<p>Консультация по подготовке к экзамену состоится 15 декабря в 16:00 в аудитории 310.</p>
      </div>
    </div>
    
    <div class="top-card">
      <div class="title">
        <h5>kmp@brsu.by | <a target="_blank" href="https://kmp7.github.io/speech.html" class="link-kmp1">Пособие</a> | <a target="_blank" href="../mpk/notes.html" class="link-kmp1">О конспекте</a></h5>
      </div>
      <div class="controls">
        <div class="control">
        <select id="studentFilter"><option value="all">Все студенты</option></select>
        </div>
        <div class="control">
        <select id="groupFilter"><option value="all">Все группы</option></select>
        </div>
      </div>
    </div>
  </header>
  <main>
    <div class="table-wrap" id="tableWrap">
      <table id="gradeTable">
        <thead id="tableHead"></thead>
        <tbody id="tableBody"></tbody>
      </table>
    </div>
    <div id="commentBox" class="comment-box" style="display:none"></div>
  </main>
  <footer>
    <div class="foot-card">Данные редактируются в массиве <code>students</code> внизу файла. © 2025</div>
  </footer>
  
  <script>
    // status:'' 
	// status:'green'
	// status:'yellow'
	// status:'black'
	
	const columns=['FDD','NKL','3','4','5','6','7','8','GHH','MMM', 'YHN'];
    const groups = ['503', '504', '505', '506', '507', '508'];
    const students=[
      {surname:'Петров', group: '503', scores:[
        {value:'', status:''}, {value:'', status:''}, {value:'', status:''}, 
        {value:'', status:''}, {value:'', status:''}, {value:'', status:''}, {value:'', status:''}, {value:'', status:''}, {value:'', status:''},{value:'', status:''}
      ],comment:'Пока ничего нет'},
      {surname:'Сидорова', group: '504', scores:[
        {value:90, status:'green'}, {value:92, status:'green'}, {value:95, status:'green'}, 
        {value:88, status:'green'}, {value:91, status:'green'}, {value:93, status:'green'}, 
        {value:90, status:'green'}, {value:92, status:'green'}, {value:89, status:'green'}, 
        {value:94, status:'green'}, {value:'', status:''}
      ],comment:'Отлично'},
      {surname:'Иванов', group: '505', scores:[
        {value:90, status:'green'}, {value:100, status:'green'}, {value:'', status:''}, 
        {value:72, status:'yellow'}, {value:68, status:'yellow'}, {value:70, status:'yellow'}, 
        {value:66, status:'yellow'}, {value:'', status:''}, {value:60, status:'black'}, 
        {value:72, status:'yellow'}, {value:'', status:''}
      ],comment:'Нужна консультация'},
      {surname:'Кузнецова', group: '505', scores:[
        {value:'', status:''}, {value:78, status:'green'}, {value:80, status:'green'}, 
        {value:82, status:'green'}, {value:79, status:'green'}, {value:81, status:'green'}, 
        {value:85, status:'green'}, {value:88, status:'green'}, {value:90, status:'green'}, 
        {value:87, status:'green'}, {value:100, status:'green'}
      ],comment:''},
      {surname:'Смирнов', group: '505', scores:[
        {value:50, status:'yellow'}, {value:55, status:'yellow'}, {value:60, status:'yellow'}, 
        {value:'', status:''}, {value:58, status:'yellow'}, {value:62, status:'yellow'}, 
        {value:59, status:'yellow'}, {value:61, status:'yellow'}, {value:65, status:'green'}, 
        {value:60, status:'yellow'}, {value:100, status:'green'}
      ],comment:'Посетить доп. занятия'},
      {surname:'Попова', group: '506', scores:[
        {value:95, status:'green'}, {value:97, status:'green'}, {value:96, status:'green'}, 
        {value:98, status:'green'}, {value:94, status:'green'}, {value:99, status:'green'}, 
        {value:97, status:'green'}, {value:98, status:'green'}, {value:96, status:'green'}, 
        {value:99, status:'green'}, {value:100, status:'green'}
      ],comment:'Мотивированный студент'},
      {surname:'Васильев', group: '506', scores:[
        {value:82, status:'green'}, {value:80, status:'green'}, {value:84, status:'green'}, 
        {value:85, status:'green'}, {value:'', status:''}, {value:86, status:'green'}, 
        {value:88, status:'green'}, {value:84, status:'green'}, {value:82, status:'green'}, 
        {value:80, status:'green'}, {value:100, status:'green'}
      ],comment:''},
      {surname:'Михайлова', group: '506', scores:[
        {value:78, status:'green'}, {value:82, status:'green'}, {value:79, status:'green'}, 
        {value:81, status:'green'}, {value:80, status:'green'}, {value:83, status:'green'}, 
        {value:85, status:'green'}, {value:'', status:''}, {value:84, status:'green'}, 
        {value:82, status:'green'}, {value:100, status:'green'}
      ],comment:'Стабильно'},
      {surname:'Новиков', group: '507', scores:[
        {value:100, status:'green'}, {value:'', status:''}, {value:'', status:''}, 
        {value:'', status:''}, {value:'', status:''}, {value:'', status:''}, 
        {value:'', status:''}, {value:'', status:''}, {value:'', status:''}, 
        {value:'', status:''}, {value:'', status:''}
      ],comment:'Отсутствует'},
      {surname:'Фёдорова', group: '507', scores:[
        {value:88, status:'green'}, {value:87, status:'green'}, {value:90, status:'green'}, 
        {value:86, status:'green'}, {value:85, status:'green'}, {value:88, status:'green'}, 
        {value:89, status:'green'}, {value:90, status:'green'}, {value:91, status:'green'}, 
        {value:92, status:'green'}, {value:'', status:''}
      ],comment:''},
      {surname:'Алексеев', group: '507', scores:[
        {value:60, status:'yellow'}, {value:62, status:'yellow'}, {value:65, status:'yellow'}, 
        {value:68, status:'yellow'}, {value:70, status:'yellow'}, {value:'', status:''}, 
        {value:72, status:'green'}, {value:74, status:'green'}, {value:76, status:'green'}, 
        {value:78, status:'green'}, {value:'', status:''}
      ],comment:'Есть прогресс'},
      {surname:'Егорова', group: '508', scores:[
        {value:92, status:'green'}, {value:90, status:'green'}, {value:94, status:'green'}, 
        {value:93, status:'green'}, {value:95, status:'green'}, {value:96, status:'green'}, 
        {value:94, status:'green'}, {value:92, status:'green'}, {value:90, status:'green'}, 
        {value:91, status:'green'}, {value:'', status:''}
      ],comment:'Очень старательна'},
      {surname:'Козлов', group: '508', scores:[
        {value:45, status:'black'}, {value:50, status:'black'}, {value:48, status:'black'}, 
        {value:55, status:'yellow'}, {value:58, status:'yellow'}, {value:52, status:'yellow'}, 
        {value:50, status:'black'}, {value:49, status:'black'}, {value:'', status:''}, 
        {value:54, status:'yellow'}, {value:'', status:''}
      ],comment:'Проблемы с подготовкой'},
      {surname:'Соловьёв', group: '508', scores:[
        {value:80, status:'green'}, {value:82, status:'green'}, {value:79, status:'green'}, 
        {value:77, status:'green'}, {value:85, status:'green'}, {value:88, status:'green'}, 
        {value:86, status:'green'}, {value:83, status:'green'}, {value:81, status:'green'}, 
        {value:84, status:'green'}, {value:100, status:'green'}
      ],comment:''},
      {surname:'Лебедева', group: '508', scores:[
        {value:100, status:'green'}, {value:99, status:'green'}, {value:98, status:'green'}, 
        {value:97, status:'green'}, {value:96, status:'green'}, {value:95, status:'green'}, 
        {value:94, status:'green'}, {value:93, status:'green'}, {value:92, status:'green'}, 
        {value:100, status:'green'}, {value:100, status:'green'}
      ],comment:'Выдающийся результат'}
    ];
    const tableHead = document.getElementById('tableHead');
    const tableBody = document.getElementById('tableBody');
    const studentFilter = document.getElementById('studentFilter');
    const groupFilter = document.getElementById('groupFilter');
    const commentBox = document.getElementById('commentBox');

    function calcPercent(scores) {
      const validScores = scores.filter(s => 
        s.value !== '' && s.status !== 'black'
      );
      const total = scores.length;
      const done = validScores.length;
      return Math.round((done / total) * 100);
    }

    function getScoreClass(score) {
      if (score.value === '') return 'empty-cell';
      return score.status || '';
    }

    function getDisplayValue(score) {
      if (score.value === '') return '-';
      return score.value;
    }

    function initFilters() {
      students.forEach(s => {
        const opt = document.createElement('option');
        opt.value = s.surname;
        opt.textContent = s.surname;
        studentFilter.appendChild(opt);
      });
      
      // Уникальные группы
      const uniqueGroups = [...new Set(groups)];
      uniqueGroups.forEach(g => {
        const opt = document.createElement('option');
        opt.value = g;
        opt.textContent = g;
        groupFilter.appendChild(opt);
      });
    }

    function renderTable(selStudent = 'all', selGroup = 'all') {
      tableHead.innerHTML = '';
      tableBody.innerHTML = '';
      
      const trh = document.createElement('tr');
      trh.innerHTML = '<th>Группа</th><th>Фамилия</th><th>Итог</th>' + 
        columns.map(c => `<th>${c}</th>`).join('');
      tableHead.appendChild(trh);
      
      let show = students;
      
      if (selStudent !== 'all') {
        show = show.filter(s => s.surname === selStudent);
      }
      
      if (selGroup !== 'all') {
        show = show.filter(s => s.group === selGroup);
      }
      
      show.forEach(st => {
        const tr = document.createElement('tr');
        const percent = calcPercent(st.scores);
        
        tr.innerHTML = `
          <td>${st.group}</td>
          <td>${st.surname}</td>
          <td class='percent'>${percent}%</td>
          ${st.scores.map(score => {
            const scoreClass = getScoreClass(score);
            const displayValue = getDisplayValue(score);
            return `<td class='score ${scoreClass}'>${displayValue}</td>`;
          }).join('')}
        `;
        tableBody.appendChild(tr);
      });
      
      if (selStudent !== 'all') {
        const st = students.find(s => s.surname === selStudent);
        if (st && st.comment) {
          commentBox.style.display = 'block';
          commentBox.textContent = 'Комментарий: ' + st.comment;
        } else {
          commentBox.style.display = 'none';
        }
      } else {
        commentBox.style.display = 'none';
      }
    }

    studentFilter.addEventListener('change', () => renderTable(studentFilter.value, groupFilter.value));
    groupFilter.addEventListener('change', () => renderTable(studentFilter.value, groupFilter.value));
    
    initFilters();
    renderTable();
  </script>
</body>
</html>